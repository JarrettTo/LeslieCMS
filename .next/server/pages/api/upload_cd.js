"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/upload_cd";
exports.ids = ["pages/api/upload_cd"];
exports.modules = {

/***/ "cloudinary":
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("cloudinary");

/***/ }),

/***/ "dropbox":
/*!**************************!*\
  !*** external "dropbox" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("dropbox");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("formidable");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload_cd&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload_cd.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload_cd&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload_cd.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_upload_cd_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\upload_cd.ts */ \"(api)/./pages/api/upload_cd.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_cd_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_upload_cd_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/upload_cd\",\n        pathname: \"/api/upload_cd\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_upload_cd_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnVwbG9hZF9jZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdXBsb2FkX2NkLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ3VEO0FBQ3ZEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxvREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsb0RBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzbGllLz80YjAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdXBsb2FkX2NkLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdXBsb2FkX2NkXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdXBsb2FkX2NkXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload_cd&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload_cd.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/upload_cd.ts":
/*!********************************!*\
  !*** ./pages/api/upload_cd.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cloudinary */ \"cloudinary\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_1__);\nconst formidable = __webpack_require__(/*! formidable */ \"formidable\");\n\n\nconst path = __webpack_require__(/*! path */ \"path\");\ncloudinary__WEBPACK_IMPORTED_MODULE_1___default().v2.config({\n    cloud_name: process.env.CLOUD_NAME,\n    api_key: process.env.API_KEY,\n    api_secret: process.env.API_SECRET,\n    secure: true\n});\nfunction parseCookies(req) {\n    const list = {};\n    const cookieHeader = req.headers.cookie;\n    if (cookieHeader) {\n        cookieHeader.split(\";\").forEach((cookie)=>{\n            const parts = cookie.split(\"=\");\n            const key = parts.shift().trim();\n            if (key) {\n                list[key] = decodeURI(parts.join(\"=\"));\n            }\n        });\n    }\n    return list;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    try {\n        const cookies = parseCookies(req);\n        const accessToken = cookies.token;\n        var error_msg = \"\";\n        const Dropbox = (__webpack_require__(/*! dropbox */ \"dropbox\").Dropbox);\n        const dbx = new Dropbox({\n            accessToken\n        });\n        const form = new formidable.IncomingForm();\n        form.parse(req, async (err, fields, files)=>{\n            if (err) {\n                console.error(\"Error parsing the form data:\", err);\n                return res.status(500).json({\n                    error: \"Error parsing form data\"\n                });\n            }\n            // Handle your logic here. 'fields' contains non-file fields; 'files' contains file data\n            const jsonData = JSON.parse(fields.json[0]);\n            const uploadPromises = jsonData.map((record)=>{\n                const index = files.files.findIndex((file)=>file.originalFilename === record.FILE_NAME);\n                if (index !== -1) {\n                    // Found the file, index is the index of the file in files.files\n                    console.log(`File found at index: ${index}`);\n                } else {\n                    // File not found\n                    console.log(\"File not found\");\n                }\n                // Adjust the logic to find the correct file in the 'files' object\n                const file = files.files[index]; // Adjust this according to how files are named\n                if (!file) {\n                    error_msg = error_msg + `${record.FILE_NAME}, `;\n                } else {\n                    const fileDate = new Date(file.lastModifiedDate).toISOString();\n                    const context = {\n                        award: record.AWARD,\n                        idea: record.IDEA,\n                        agency: record.AGENCY,\n                        clients: record.CLIENTS,\n                        director: record.DIRECTOR,\n                        sound: record.SOUND,\n                        with: record.WITH,\n                        my_role: record.MY_ROLE,\n                        production_co: record.PRODUCTION_CO,\n                        date: fileDate\n                    };\n                    return new Promise((resolve, reject)=>{\n                        const readStream = fs__WEBPACK_IMPORTED_MODULE_0___default().createReadStream(file.filepath);\n                        const cloudinaryStream = cloudinary__WEBPACK_IMPORTED_MODULE_1___default().v2.uploader.upload_stream({\n                            resource_type: \"auto\",\n                            public_id: record[\"FILE_NAME\"],\n                            context: context // Optional: add additional metadata from the record\n                        }, (error, result)=>{\n                            if (error) {\n                                reject(error);\n                            } else {\n                                resolve(result);\n                            }\n                        });\n                        const cloudinaryResult = readStream.pipe(cloudinaryStream);\n                        const dropboxPath = \"/\" + file.originalFilename; // Set your Dropbox path\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().readFile(file.filepath, (err, contents)=>{\n                            if (err) {\n                                reject(err);\n                            }\n                            dbx.filesUpload({\n                                path: dropboxPath,\n                                contents\n                            }).then((dropboxResult)=>{\n                                resolve(dropboxResult);\n                            }).catch((error)=>{\n                                reject(error);\n                            });\n                        });\n                    });\n                }\n            });\n            const uploadResults = await Promise.allSettled(uploadPromises);\n            uploadResults.forEach((result)=>{\n                if (result.status === \"rejected\") {\n                    console.log(\"A file upload failed:\", result.reason);\n                }\n            });\n            if (error_msg == \"\") {\n                res.status(200).json({\n                    message: \"Files uploaded successfully\",\n                    data: uploadResults,\n                    status: 200\n                });\n            } else {\n                res.status(400).json({\n                    message: error_msg,\n                    data: uploadResults,\n                    status: 400\n                });\n            }\n        });\n    // Send back the response with Cloudinary results\n    } catch (error) {\n        console.log(\"Here\");\n        res.status(500).json({\n            error: \"Error uploading to Cloudinary\",\n            details: error\n        });\n    }\n});\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBRTRELFNBQVM7b0JBQStCQyxNQUFNSjtvQkFBZTFELFFBQVE7Z0JBQUc7WUFDakcsT0FDSTtnQkFDRmYsSUFBSWUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRTRELFNBQVN4RTtvQkFBV3lFLE1BQU1KO29CQUFlMUQsUUFBUTtnQkFBRztZQUM3RTtRQUVEO0lBS0QsaURBQWlEO0lBR2pELEVBQUUsT0FBT0QsT0FBTztRQUNkRCxRQUFRYyxHQUFHLENBQUM7UUFDWjNCLElBQUllLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUYsT0FBTztZQUFpQ2dFLFNBQVNoRTtRQUFNO0lBQ2hGO0FBQ0YsR0FBQztBQUdNLE1BQU10QyxTQUFTO0lBQ3BCdUcsS0FBSztRQUNIQyxZQUFZO0lBQ2Q7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVzbGllLy4vcGFnZXMvYXBpL3VwbG9hZF9jZC50cz9mZTE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5jb25zdCBmb3JtaWRhYmxlID0gcmVxdWlyZSgnZm9ybWlkYWJsZScpO1xyXG5pbXBvcnQgZnMsIHsgcmVhZCB9IGZyb20gJ2ZzJztcclxuXHJcbmltcG9ydCBjbG91ZGluYXJ5IGZyb20gJ2Nsb3VkaW5hcnknO1xyXG5cclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY2xvdWRpbmFyeS52Mi5jb25maWcoe1xyXG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VEX05BTUUsXHJcbiAgYXBpX2tleTogcHJvY2Vzcy5lbnYuQVBJX0tFWSxcclxuICBhcGlfc2VjcmV0OiBwcm9jZXNzLmVudi5BUElfU0VDUkVULFxyXG4gIHNlY3VyZTogdHJ1ZSxcclxufSk7XHJcblxyXG5pbnRlcmZhY2UgQ29va2llT2JqZWN0IHtcclxuICBba2V5OiBzdHJpbmddOiBzdHJpbmc7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBwYXJzZUNvb2tpZXMocmVxOiBOZXh0QXBpUmVxdWVzdCk6IENvb2tpZU9iamVjdCB7XHJcbiAgY29uc3QgbGlzdDogQ29va2llT2JqZWN0ID0ge307XHJcbiAgY29uc3QgY29va2llSGVhZGVyID0gcmVxLmhlYWRlcnMuY29va2llO1xyXG5cclxuICBpZiAoY29va2llSGVhZGVyKSB7XHJcbiAgICBjb29raWVIZWFkZXIuc3BsaXQoJzsnKS5mb3JFYWNoKChjb29raWUpID0+IHtcclxuICAgICAgY29uc3QgcGFydHMgPSBjb29raWUuc3BsaXQoJz0nKTtcclxuICAgICAgY29uc3Qga2V5ID0gcGFydHMuc2hpZnQoKS50cmltKCk7XHJcbiAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICBsaXN0W2tleV0gPSBkZWNvZGVVUkkocGFydHMuam9pbignPScpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbGlzdDtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuXHJcbiAgdHJ5e1xyXG5cclxuICAgIGNvbnN0IGNvb2tpZXMgPSBwYXJzZUNvb2tpZXMocmVxKTtcclxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gY29va2llcy50b2tlbjtcclxuICAgIHZhciBlcnJvcl9tc2c9XCJcIjtcclxuICAgIGNvbnN0IERyb3Bib3ggPSByZXF1aXJlKCdkcm9wYm94JykuRHJvcGJveDtcclxuICAgIGNvbnN0IGRieCA9IG5ldyBEcm9wYm94KHsgYWNjZXNzVG9rZW4gfSk7XHJcbiAgICBjb25zdCBmb3JtID0gbmV3IGZvcm1pZGFibGUuSW5jb21pbmdGb3JtKCk7XHJcbiAgICBcclxuICAgIGZvcm0ucGFyc2UocmVxLCBhc3luYyAoZXJyLCBmaWVsZHMsIGZpbGVzKSA9PiB7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIHRoZSBmb3JtIGRhdGE6JywgZXJyKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yIHBhcnNpbmcgZm9ybSBkYXRhJyB9KTtcclxuICAgICAgfVxyXG4gXHJcbiAgICAgLy8gSGFuZGxlIHlvdXIgbG9naWMgaGVyZS4gJ2ZpZWxkcycgY29udGFpbnMgbm9uLWZpbGUgZmllbGRzOyAnZmlsZXMnIGNvbnRhaW5zIGZpbGUgZGF0YVxyXG4gICAgIFxyXG4gICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5wYXJzZShmaWVsZHMuanNvblswXSk7XHJcblxyXG5cclxuICAgICBjb25zdCB1cGxvYWRQcm9taXNlcyA9IGpzb25EYXRhLm1hcCgocmVjb3JkKSA9PiB7XHJcblxyXG4gICAgICBcclxuICAgIFxyXG4gICAgICBjb25zdCBpbmRleCA9IGZpbGVzLmZpbGVzLmZpbmRJbmRleChmaWxlID0+IGZpbGUub3JpZ2luYWxGaWxlbmFtZSA9PT0gcmVjb3JkLkZJTEVfTkFNRSk7XHJcblxyXG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAvLyBGb3VuZCB0aGUgZmlsZSwgaW5kZXggaXMgdGhlIGluZGV4IG9mIHRoZSBmaWxlIGluIGZpbGVzLmZpbGVzXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRmlsZSBmb3VuZCBhdCBpbmRleDogJHtpbmRleH1gKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIEZpbGUgbm90IGZvdW5kXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkZpbGUgbm90IGZvdW5kXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIEFkanVzdCB0aGUgbG9naWMgdG8gZmluZCB0aGUgY29ycmVjdCBmaWxlIGluIHRoZSAnZmlsZXMnIG9iamVjdFxyXG4gICAgICBjb25zdCBmaWxlID0gZmlsZXMuZmlsZXNbaW5kZXhdOyAvLyBBZGp1c3QgdGhpcyBhY2NvcmRpbmcgdG8gaG93IGZpbGVzIGFyZSBuYW1lZFxyXG4gICAgICBcclxuICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgZXJyb3JfbXNnPSBlcnJvcl9tc2crYCR7cmVjb3JkLkZJTEVfTkFNRX0sIGBcclxuXHJcbiAgICAgIH1cclxuICAgICAgZWxzZXtcclxuICAgICAgICBjb25zdCBmaWxlRGF0ZSA9IG5ldyBEYXRlKGZpbGUubGFzdE1vZGlmaWVkRGF0ZSkudG9JU09TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgYXdhcmQ6IHJlY29yZC5BV0FSRCxcclxuICAgICAgICAgIGlkZWE6IHJlY29yZC5JREVBLFxyXG4gICAgICAgICAgYWdlbmN5OiByZWNvcmQuQUdFTkNZLFxyXG4gICAgICAgICAgY2xpZW50czogcmVjb3JkLkNMSUVOVFMsXHJcbiAgICAgICAgICBkaXJlY3RvcjogcmVjb3JkLkRJUkVDVE9SLFxyXG4gICAgICAgICAgc291bmQ6IHJlY29yZC5TT1VORCxcclxuICAgICAgICAgIHdpdGg6IHJlY29yZC5XSVRILFxyXG4gICAgICAgICAgbXlfcm9sZTogcmVjb3JkLk1ZX1JPTEUsXHJcbiAgICAgICAgICBwcm9kdWN0aW9uX2NvOiByZWNvcmQuUFJPRFVDVElPTl9DTyxcclxuICAgICAgICAgIGRhdGU6IGZpbGVEYXRlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHJlYWRTdHJlYW0gPSBmcy5jcmVhdGVSZWFkU3RyZWFtKGZpbGUuZmlsZXBhdGgpO1xyXG4gICAgICAgICAgY29uc3QgY2xvdWRpbmFyeVN0cmVhbT0gY2xvdWRpbmFyeS52Mi51cGxvYWRlci51cGxvYWRfc3RyZWFtKHsgXHJcbiAgICAgICAgICAgIHJlc291cmNlX3R5cGU6ICdhdXRvJywgXHJcbiAgICAgICAgICAgIHB1YmxpY19pZDogcmVjb3JkW1wiRklMRV9OQU1FXCJdLCAvLyBPcHRpb25hbDogdXNlIGEgcHVibGljIElEIGZyb20gdGhlIHJlY29yZFxyXG4gICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0IC8vIE9wdGlvbmFsOiBhZGQgYWRkaXRpb25hbCBtZXRhZGF0YSBmcm9tIHRoZSByZWNvcmRcclxuICAgICAgICAgIH0sIChlcnJvciwgcmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNvbnN0IGNsb3VkaW5hcnlSZXN1bHQgPSByZWFkU3RyZWFtLnBpcGUoY2xvdWRpbmFyeVN0cmVhbSk7XHJcbiAgICAgICAgICBjb25zdCBkcm9wYm94UGF0aCA9ICcvJyArIGZpbGUub3JpZ2luYWxGaWxlbmFtZTsgLy8gU2V0IHlvdXIgRHJvcGJveCBwYXRoXHJcblxyXG4gICAgICAgICAgZnMucmVhZEZpbGUoZmlsZS5maWxlcGF0aCwgKGVyciwgY29udGVudHMpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGRieC5maWxlc1VwbG9hZCh7IHBhdGg6IGRyb3Bib3hQYXRoLCBjb250ZW50cyB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZHJvcGJveFJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHJlc29sdmUoZHJvcGJveFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICB9KTtcclxuXHJcbiBcclxuICAgIGNvbnN0IHVwbG9hZFJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQodXBsb2FkUHJvbWlzZXMpO1xyXG4gICAgdXBsb2FkUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcclxuICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQSBmaWxlIHVwbG9hZCBmYWlsZWQ6JywgcmVzdWx0LnJlYXNvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYoZXJyb3JfbXNnPT1cIlwiKXtcclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnRmlsZXMgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5JywgZGF0YTogdXBsb2FkUmVzdWx0cywgc3RhdHVzOiAyMDB9KTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3JfbXNnLCBkYXRhOiB1cGxvYWRSZXN1bHRzLCBzdGF0dXM6IDQwMH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgIH0pO1xyXG4gICBcclxuICBcclxuICAgIFxyXG5cclxuICAvLyBTZW5kIGJhY2sgdGhlIHJlc3BvbnNlIHdpdGggQ2xvdWRpbmFyeSByZXN1bHRzXHJcbiAgICBcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiSGVyZVwiKVxyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yIHVwbG9hZGluZyB0byBDbG91ZGluYXJ5JywgZGV0YWlsczogZXJyb3IgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLCAvLyBEaXNhYmxlcyBib2R5IHBhcnNpbmcsIGxlYXZpbmcgaXQgdG8gbXVsdGVyXHJcbiAgfSxcclxufTtcclxuIl0sIm5hbWVzIjpbImZvcm1pZGFibGUiLCJyZXF1aXJlIiwiZnMiLCJjbG91ZGluYXJ5IiwicGF0aCIsInYyIiwiY29uZmlnIiwiY2xvdWRfbmFtZSIsInByb2Nlc3MiLCJlbnYiLCJDTE9VRF9OQU1FIiwiYXBpX2tleSIsIkFQSV9LRVkiLCJhcGlfc2VjcmV0IiwiQVBJX1NFQ1JFVCIsInNlY3VyZSIsInBhcnNlQ29va2llcyIsInJlcSIsImxpc3QiLCJjb29raWVIZWFkZXIiLCJoZWFkZXJzIiwiY29va2llIiwic3BsaXQiLCJmb3JFYWNoIiwicGFydHMiLCJrZXkiLCJzaGlmdCIsInRyaW0iLCJkZWNvZGVVUkkiLCJqb2luIiwicmVzIiwiY29va2llcyIsImFjY2Vzc1Rva2VuIiwidG9rZW4iLCJlcnJvcl9tc2ciLCJEcm9wYm94IiwiZGJ4IiwiZm9ybSIsIkluY29taW5nRm9ybSIsInBhcnNlIiwiZXJyIiwiZmllbGRzIiwiZmlsZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiLCJqc29uIiwianNvbkRhdGEiLCJKU09OIiwidXBsb2FkUHJvbWlzZXMiLCJtYXAiLCJyZWNvcmQiLCJpbmRleCIsImZpbmRJbmRleCIsImZpbGUiLCJvcmlnaW5hbEZpbGVuYW1lIiwiRklMRV9OQU1FIiwibG9nIiwiZmlsZURhdGUiLCJEYXRlIiwibGFzdE1vZGlmaWVkRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29udGV4dCIsImF3YXJkIiwiQVdBUkQiLCJpZGVhIiwiSURFQSIsImFnZW5jeSIsIkFHRU5DWSIsImNsaWVudHMiLCJDTElFTlRTIiwiZGlyZWN0b3IiLCJESVJFQ1RPUiIsInNvdW5kIiwiU09VTkQiLCJ3aXRoIiwiV0lUSCIsIm15X3JvbGUiLCJNWV9ST0xFIiwicHJvZHVjdGlvbl9jbyIsIlBST0RVQ1RJT05fQ08iLCJkYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkU3RyZWFtIiwiY3JlYXRlUmVhZFN0cmVhbSIsImZpbGVwYXRoIiwiY2xvdWRpbmFyeVN0cmVhbSIsInVwbG9hZGVyIiwidXBsb2FkX3N0cmVhbSIsInJlc291cmNlX3R5cGUiLCJwdWJsaWNfaWQiLCJyZXN1bHQiLCJjbG91ZGluYXJ5UmVzdWx0IiwicGlwZSIsImRyb3Bib3hQYXRoIiwicmVhZEZpbGUiLCJjb250ZW50cyIsImZpbGVzVXBsb2FkIiwidGhlbiIsImRyb3Bib3hSZXN1bHQiLCJjYXRjaCIsInVwbG9hZFJlc3VsdHMiLCJhbGxTZXR0bGVkIiwicmVhc29uIiwibWVzc2FnZSIsImRhdGEiLCJkZXRhaWxzIiwiYXBpIiwiYm9keVBhcnNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/upload_cd.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fupload_cd&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cupload_cd.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();